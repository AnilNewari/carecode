<!DOCTYPE html>
<html lang="en" class="gr__dl2_pushbulletusercontent_com">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>saftey qr code</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="preconnect" href="https://fonts.bunny.net">
    <link href="https://fonts.bunny.net/css?family=montserrat:200,300,400,500,700,900|open-sans:300,400,500,800"
        rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/jsbarcode/3.6.0/JsBarcode.all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>

<body data-gr-c-s-loaded="true" class="body" id="body">
    <!-- <div id="qr-page" class="a4-page">
    </div>
    <div id="qr-page2" class="a4-page">
    </div>
    <div id="qr-page3" class="a4-page">
    </div> -->
    <p class="print-hide">
        <button onclick="window.print()">Download/Print</button>
    </p>
    <script type="text/javascript">
        let qr_cards = '';
        let qr_body = document.getElementById("body");
        let qr_page = document.getElementById("qr-page");
        let qr_page2 = document.getElementById("qr-page2");
        let qrNumber = 100;
        let startIndex = 1;
        let endIndex = 18;
        let pageIndex = 0;
        let qrPage = '';
        for (let i = startIndex; i <= endIndex; i++) {
            qrNumber++;
            const randomString = Math.random().toString(36).substring(2, 20);
            let qrId = "https://surkshacode.com/safetycode/" + randomString + qrNumber;
            qr_cards = qr_cards + `<div class="card-container"> <div class="image-holder"> <img src="./qrcode.jpg" alt=""> </div> <div class="card-content"> <div class="qr-code" id="qrcode-${i}" qr-id="${qrId}"></div> </div> </div>`
            if (i % 9 == 0) {
                pageIndex++;
                createPage(pageIndex, i, qr_cards)
            }
        }
        function createPage(pIndex, index, cards) {
            console.log('pIndex', pIndex);
            //console.log('index', index);
            qrPage = qrPage + `<div id="qrpage-${pIndex}" class="a4-page">${pIndex}</div>`;
            qr_body.innerHTML = qrPage;
            if (pIndex == endIndex / 9) {
                addQrCards(pIndex, index, cards);
            }
            //setQrCodes(index - 8, index);

        }
        function addQrCards(pIndex, index, cards) {
            console.log('addPageCodes', pIndex);
            for (let i = 1; i <= pIndex; i++) {
                let page = document.getElementById("qrpage-" + i);
                page.innerHTML = cards;
            }

        }
        function setQrCodes(start, end) {
            for (let j = start; j <= end; j++) {
                let elem = document.getElementById("qrcode-" + j);
                if (!elem) {
                    continue;
                }
                let qrIdValue = elem.getAttribute("qr-id");
                if (!qrIdValue) {
                    continue;
                }
                console.log(qrIdValue);
                new QRCode(elem, qrIdValue);
            }
        }

    </script>
</body>

</html>